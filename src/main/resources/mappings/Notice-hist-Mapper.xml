<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hungpick.dao.IDaoNotice"> <!-- "<" 는 문법오류나서  "<![CDATA[ < ]]>" 이렇게 해야한다. -->

	<select id="sltOneNoice" parameterType="String" resultType="mbrDto">
		SELECT * 
		FROM 
		NOTICE
		WHERE ADMIN_CODE = #{ adminCode } AND
		NOTICE_CODE = #{ noticeCode } 
	</select>
	
	<select id="listCount" resultType="int">
		<![CDATA[
			SELECT COUNT(NOTICE_CODE)
				FROM NOTICE
				WHERE NOTICE_CODE > 0
		]]>
	</select>
	
	<select id="listPage" resultType="mbrDto" parameterType="Criteria">
		SELECT  * FROM (   SELECT   ROW_NUMBER() OVER(ORDER BY NOTICE_CODE DESC)
		 NUM, A.* FROM NOTICE A ORDER BY NOTICE_CODE) 
		WHERE NUM BETWEEN #{rowStart} AND #{rowEnd}
		ORDER BY NOTICE_CODE DESC
	</select>
		
	<select id="noticeCode" resultType="mbrDto">
		SELECT DISTINCT ADMIN_CODE FROM NOTICE   WHERE  ADMIN_CODE = #{adminCode}
	</select>
		
	<select id="AdminselectAll" resultType="mbrDto">
		SELECT * FROM NOTICE ORDER BY ADMIN_CODE 
	</select>
	
	<insert id="insert" parameterType="mbrDto">
		INSERT INTO NOTICE VALUES ( #{ adminCode }, NOTICE_SEQ.NEXTVAL, #{ noticeTitle }, #{ noticeContent }, TO_DATE( #{noticeDate} ,'YYYY-MM-DD HH24:MI:SS'), #{noticeImg} )
	</insert>

	<update id="update" parameterType="mbrDto">
		UPDATE NOTICE SET NOTICE_TITLE = #{ noticeTitle }, NOTICE_CONTENT = #{ noticeContent } , NOTICE_DATE = TO_DATE( #{noticeDate} ,'YYYY-MM-DD HH24:MI:SS') ,NOTICE_IMG = #{noticeImg} WHERE ADMIN_CODE = #{ adminCode } AND NOTICE_CODE = #{ noticeCode }  
	</update>

	<delete id="delete">
		DELETE FROM NOTICE WHERE ADMIN_CODE = #{adminCode} AND NOTICE_CODE = #{ noticeCode }
	</delete>

</mapper>
